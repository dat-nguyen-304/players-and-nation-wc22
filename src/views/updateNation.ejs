<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../../home.css">
    <style>
        .modal-body {
            max-width: 1200px;
            margin: 0 auto;
        }

        .title {
            margin-top: 0;
            padding-top: 20px;
        }

        .preview-image {
            width: 100%;
            height: 100px;
            object-fit: cover;
            display: flex;
            justify-content: center;
        }
    </style>

<body>
    <div class="main">
        <%- include('./common/menu.ejs') %>
            <div class="course">
                <h2 class="content-heading title">
                    Update Nation
                </h2>
                <form action="/nations/<%= nation._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                    <div class=" modal-body">
                        <div class="preview-image">
                            <img src="<%= nation.image %>" />
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Name:</label>
                            <input required type="text" name="name" class="form-control" id="recipient-name"
                                value="<%= nation.name %>">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Description:</label>
                            <input required type="text" class="form-control" name="description" id="recipient-name"
                                value="<%= nation.description %>">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Image: </label>
                            <input type="file" onchange="previewImage(this)" name="image" class="form-control"
                                id="recipient-name">
                        </div>
                        <div class="modal-footer">
                            <a href="/nations" style="margin-top: 20px;" type="submit" class="Btn Btn--gray">Back</a>
                            <button style="margin-top: 20px;" type="submit" class="Btn Btn--primary">UPDATE</button>
                        </div>
                    </div>
                </form>
            </div>
    </div>

</body>
<script>
    function previewImage (input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                var element = document.querySelector('.preview-image');
                var imgPreview = document.createElement('img');
                imgPreview.src = e.target.result;
                element.innerHTML = "";
                element.appendChild(imgPreview);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

</html>